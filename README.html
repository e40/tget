<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style>
	html,body{color:black}*{margin:0;padding:0}body{font:13.34px helvetica,arial,freesans,clean,sans-serif;-webkit-font-smoothing:subpixel-antialiased;line-height:1.4;padding:3px;background:#fff;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px}p{margin:1em 0}a{color:#4183c4;text-decoration:none}#wrapper{background-color:#fff;padding:30px;font-size:14px;line-height:1.6;width:900px;margin:15px auto;}@media screen{#wrapper{box-shadow:0 0 0 1px #cacaca,0 0 0 4px #eee}}#wrapper>*:first-child{margin-top:0!important}#wrapper>*:last-child{margin-bottom:0!important}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:bold;-webkit-font-smoothing:subpixel-antialiased;cursor:text}h1{font-size:28px;color:#000}h2{font-size:24px;border-bottom:1px solid #ccc;color:#000}h3{font-size:18px;color:#333}h4{font-size:16px;color:#333}h5{font-size:14px;color:#333}h6{color:#777;font-size:14px}p,blockquote,ul,ol,dl,table,pre{margin:15px 0}ul,ol{padding-left:30px}hr{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;border:0 none;color:#ccc;height:4px;padding:0}#wrapper>h2:first-child,#wrapper>h1:first-child,#wrapper>h1:first-child+h2,#wrapper>h3:first-child,#wrapper>h4:first-child,#wrapper>h5:first-child,#wrapper>h6:first-child{margin-top:0;padding-top:0}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6{margin-top:0;padding-top:0}h1+p,h2+p,h3+p,h4+p,h5+p,h6+p{margin-top:0}ul li>:first-child,ol li>:first-child{margin-top:0}dl{padding:0}dl dt{font-size:14px;font-weight:bold;font-style:italic;padding:0;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt>:first-child{margin-top:0}dl dt>:last-child{margin-bottom:0}dl dd{margin:0 0 15px;padding:0 15px}dl dd>:first-child{margin-top:0}dl dd>:last-child{margin-bottom:0}blockquote{border-left:4px solid #DDD;padding:0 15px;color:#777}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{border-collapse:collapse;border-spacing:0;font-size:100%;font:inherit}table th{font-weight:bold}table th,table td{border:1px solid #ccc;padding:6px 13px}table tr{border-top:1px solid #ccc;background-color:#fff}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre>code{margin:0;padding:0;white-space:pre;border:0;background:transparent}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:0}.poetry pre{font-family:Georgia,Garamond,serif!important;font-style:italic;font-size:110%!important;line-height:1.6em;display:block;margin-left:1em}.poetry pre code{font-family:Georgia,Garamond,serif!important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;vertical-align:super;position:relative}sub{vertical-align:sub;top:-1px}@media print{body{background:#fff}img,pre,blockquote,table,figure{page-break-inside:avoid}#wrapper{background:#fff;border:0}code{background-color:#fff;color:#444!important;padding:0 .2em;border:1px solid #dedede}pre code{background-color:#fff!important;overflow:visible}pre{background:#fff}}@media screen{body.inverted,.inverted #wrapper,.inverted hr .inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dd,.inverted dt,.inverted blockquote{color:#eee!important;border-color:#555}.inverted td,.inverted th{background:#333}.inverted pre,.inverted code,.inverted tt{background:#444!important}.inverted h2{border-color:#555}.inverted hr{border-color:#777;border-width:1px!important}::selection{background:rgba(157,193,200,.5)}h1::selection{background-color:rgba(45,156,208,.3)}h2::selection{background-color:rgba(90,182,224,.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,.3)}code::selection{background-color:rgba(0,0,0,.7);color:#eee}code span::selection{background-color:rgba(0,0,0,.7)!important;color:#eee!important}a::selection{background-color:rgba(255,230,102,.2)}.inverted a::selection{background-color:rgba(255,230,102,.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,.5)}.inverted{background:#0b2531}.inverted #wrapper,.inverted{background:rgba(37,42,42,1)}.inverted a{color:rgba(172,209,213,1)}}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#800080;font-weight:bold}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kn{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#099}.highlight .gc{color:#999;background-color:#eaf2f5}.type-csharp .highlight .k{color:#00F}.type-csharp .highlight .kt{color:#00F}.type-csharp .highlight .nf{color:#000;font-weight:normal}.type-csharp .highlight .nc{color:#2b91af}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s{color:#a31515}.type-csharp .highlight .sc{color:#a31515}
	</style>
</head>
<body>
<div id="wrapper">
<h1>tget - t0rrent get</h1>

<p>tget grew out of my dissatisfaction with flexget's behavior and<br>
configuration.  Don't get me wrong, flexget is an amazing program in<br>
its own right, but there were some things I couldn't get it to do.<br>
And configuration is clumsy, at best.  Coming from the Lisp world,<br>
YAML just sucks.  Go ahead and compare tget's example configuration<br>
file to that of flexget.  The power and flexibility of Lisp make the<br>
comparison a shutout.  Of course, that assumes tget does what you want<br>
it to do.</p>

<p>The main limitation I wanted to overcome by writing tget, though, was<br>
to set the download quality based on time: wait 6 hours (from<br>
publication date), then download the x264 SD version, but if after 12<br>
hours after that a version isn't available, then download the x264<br>
720p version, and if either of those aren't available for 2 days then<br>
download the XviD SD version.  The latter is really my last choice,<br>
because the quality can be pretty crappy.  What I just described is<br>
not possible in flexget.  tget makes this pretty easy.</p>

<p>tget isn't nearly as functional as flexget, though, and the feed<br>
parsing only works (currently) with two sites (TVT, BTN).  I'm looking<br>
at adding more.</p>

<h3>Table of Contents</h3>

<p><strong><a href="#installation">Installation</a></strong><br><br><strong><a href="#configuration">Configuration</a></strong><br><br><strong><a href="#putting-it-into-service">Putting it into service</a></strong><br><br><strong><a href="#maintenance-tasks">Maintenance tasks</a></strong><br><br><strong><a href="#usage">Usage</a></strong><br><br><strong><a href="#example-configuration-file">Example configuration file</a></strong>  </p>

<h2>Installation</h2>

<p>I run tget on Linux.  It should run fine on Mac OS X, as well.</p>

<p>tget depends on two other software packages:</p>

<p><em>transmission-remote</em> -- a program that can communicate to a local<br>
or remote instance of Transmission.  tget uses it to do the work of<br>
download the files.  I run Transmission on Mac OS X, on the same<br>
local area network.  <em>transmission-remote</em> makes this easy.</p>

<p><em>Allegro Common Lisp</em> -- For now, at least, no binary packages of tget<br>
are available and you need Allegro Common Lisp to build it.</p>

<p>After cloning the repo, do this to build tget:</p>

<pre><code>$ make
</code></pre>

<p>That should produce a directory <code>tget/</code>, which can be installed with:</p>

<pre><code>$ make install
</code></pre>

<p>You can make a <code>Makefile.local</code> to override features of the GNU Make<br>
file.</p>

<h2>Configuration</h2>

<p>At the highest level, the configuration file defines these entities:</p>

<ul>
<li><p><em>transmission-remote settings</em> - in the config example below I pull<br>
items from the environment, mainly because I don't want to share<br>
that private information in this documentation.  You can store yours<br>
in the configuration file directly.</p></li>
<li><p><em>RSS feeds</em> - this is where tget gets the information on what is<br>
available to download.  Each feed is site specific and possibly user<br>
specific.</p></li>
<li><p><em>quality settings</em> - these define the quality of the files you want<br>
to download.  It's a very important aspect of the configuration, as<br>
it will directly affect your viewing pleasure.</p></li>
<li><p><em>download groups</em> - if you have multiple people that are watching<br>
episodes, or multiple sites from which you are downloading, then you<br>
likely will want to use different groups with differing options for<br>
each group.  Each group might, for example, have different download<br>
locations.</p></li>
<li><p><em>TV shows you care about</em> - the <code>defseries</code> macro defines the shows<br>
you want to download.  A series is associated with a group, at a<br>
minimum, and can override the quality of what you want to download.<br>
For example, you may want to download <em>720p</em> versions of <em>Top Gear</em>,<br>
but would accept a lower resolution of other shows.</p></li>
</ul><p>That's the big picture.  There is an example configuration file below.<br>
It is fully annotated and is a good place to start.</p>

<h3><code>deftransmission &amp;key ...keywords...</code></h3>

<p>The values for each keyword option (the names after <em>&amp;key</em>, given in<br>
the following table) have direct correspondence to<br><em>transmission-remote</em> command line arguments:</p>

<table>
<tr>
<th align="center">tget keyword</th>
<th align="center">
<em>transmission-remote</em> argument</th>
</tr>
<tr>
<td align="center">
<code>:host</code> &amp; <code>:port</code>
</td>
<td align="center"><em>host:port</em></td>
</tr>
<tr>
<td align="center">
<code>:username</code> &amp; <code>:password</code>
</td>
<td align="center">
<code>--auth</code> <em>username:password</em>
</td>
</tr>
<tr>
<td align="center"><code>:add-paused t</code></td>
<td align="center"><code>--start-paused</code></td>
</tr>
<tr>
<td align="center"><code>:add-paused nil</code></td>
<td align="center"><code>--no-start-paused</code></td>
</tr>
<tr>
<td align="center"><code>:trash-torrent-file t</code></td>
<td align="center"><code>--trash-torrent</code></td>
</tr>
<tr>
<td align="center"><code>:ratio</code></td>
<td align="center">
<code>-sr</code> <em>ratio</em>
</td>
</tr>
<tr>
<td align="center"><code>:download-path</code></td>
<td align="center">
<code>--download-dir</code> <em>path</em>
</td>
</tr>
</table><p>You can use <code>(sys:getenv "ENV_VAR")</code> to grab values from the<br>
environment.</p>

<h3><code>defquality &amp;key priority container source codec resolution</code></h3>

<p>The valid values for each keyword option (the names after <em>&amp;key</em>) are:</p>

<p><code>:priority</code> -- any positive integer from 1 to 100.  The higher the<br>
number the higher the priority the that has this quality will be given<br>
if there are multiple matching episodes.</p>

<p><code>:container</code> -- the acceptable containers for the quality.  A container<br>
is, essentially, the file type of the downloaded file (e.g. <em>mp4</em>).<br>
Valid values:</p>

<pre><code>:avi, :mkv, :vob, :mpeg, :mp4, :iso, :wmv, :ts, :m4v, :m2ts
</code></pre>

<p><code>:source</code> -- the acceptable source for the quality.  The source is where<br>
the stream originated.  <em>:hdtv</em> is a common source.  Valid values:</p>

<pre><code>:pdtv, :hdtv, :dsr, :dvdrip, :tvrip, :vhsrip, :bluray, :bdrip, :brrip, :dvd5, :dvd9, :hddvd, :web-dl
</code></pre>

<p><code>:codec</code> -- the codec used to encode the original source (e.g. <em>XviD</em> or<br><em>x264</em>, aka <em>h.264</em>).  Valid values:</p>

<pre><code>:x264, :h.264, :xvid, :mpeg2, :divx, :dvdr, :vc-1, :wmv, :bd
</code></pre>

<p><code>:resolution</code> -- the resolution of the encoded image (e.g. <em>720p</em>).<br>
Valid values:</p>

<pre><code>:sd, :720p, :1080p, :1080i
</code></pre>

<h3><code>defgroup name &amp;key rss-url debug-feed delay ratio quality download-path</code></h3>

<p><code>name</code> -- the name of the group, a keyword (e.g. :bruce).</p>

<p><code>:rss-url</code> -- the URL of the RSS feed.</p>

<p><code>:debug-feed</code> -- a file name containing the static XML to be used in<br>
debug mode instead of the fetching it from the URL (given by<br>
:rss-url).</p>

<p><code>:delay</code> -- nil or a positive integer, which represents the delay, in<br>
hours, that episodes should be delayed from download.  <strong>NOTE:</strong> this<br>
is distinct from any site-specific delay that might be available in<br>
the RSS feed.</p>

<p><code>ratio</code> -- the share ratio given to all downloads for this group.<br>
It's a string not a floating point number, so we don't have to worry<br>
about the printed representation of floats.  It no ratio is given,<br>
then the default in Transmission is used.  A ratio of "-1" means seed<br>
forever.</p>

<p><code>:quality</code> -- a user-defined quality symbol.  See <code>defquality</code>.</p>

<p><code>:download-path</code> -- The path used by <em>transmission-remote</em> to store<br>
the downloaded file for this group.  Because the path can be remote,<br>
no checking on the validity of the path is done.</p>

<h3><code>defseries name group &amp;key delay quality</code></h3>

<p>Required arguments:</p>

<p><code>name</code> -- the name of the series.  Case is not significant, and single<br>
quotes are removed in parsing.</p>

<p><code>group</code> -- the group to which this series belongs.</p>

<p>Optional arguments:</p>

<p><code>:delay</code> -- this allows the group delay to be overriden.</p>

<p><code>:quality</code> -- this allows the group quality to be overriden.</p>

<h2>Putting it into service</h2>

<p>Running from <em>cron</em> is the preferred method of operation.  This<br>
crontab entry will do the job:</p>

<pre><code>0 3 * * *  source $HOME/.profile; /usr/local/bin/tget --cron
</code></pre>

<p>It runs every day at 3AM.  Running more often is fine, but you need to<br>
be careful not to run afoul of the site rules.</p>

<p>If you want the email to go to <code>username@domain</code>, then you can specify<br>
the <em>crontab</em> entry like this:</p>

<pre><code>0 3 * * *  source $HOME/.profile; MAILTO=username@domain /usr/local/bin/tget --cron
</code></pre>

<p>I source my <code>$HOME/.profile</code> (which is sourced by my <code>$HOME/.bashrc</code>)<br>
to pick up some environment variables used for the Transmission<br>
interface.</p>

<h2>Maintenance tasks</h2>

<p>coming soon</p>

<h2>Usage</h2>

<p>The tget options are below.  When there is an argument naming series,<br>
these are canonicalized by removing single quotes and converting to lower<br>
case.</p>

<ul>
<li>
<p><code>--help</code></p>

<p>Print this help text and exit.</p>
</li>
</ul><p>The following are arguments controlling primary behavior:</p>

<ul>
<li>
<p><code>--catch-up</code></p>

<p>Go through the database and make the newest episode of each series the<br>
oldest episode that will ever be downloaded for that series; this<br>
prevents old episodes, which are released from time to time, from being<br>
downloaded.</p>
</li>
<li>
<p><code>--catch-up-series series-ep</code></p>

<p>Catch series up to the episode given in the companion argument.<br>
See examples below.</p>
</li>
<li>
<p><code>--delete-episodes name</code></p>

<p>Delete episodes with series name matching <code>name</code>.  This is permanant!<br>
Using this option with --auto-backup force is recommended.</p>
</li>
<li>
<p><code>--delete-series name</code></p>

<p>Delete series with series name matching <code>name</code>.  This is permanant!<br>
Using this option with --auto-backup force is recommended.</p>
</li>
<li>
<p><code>--dump-all</code></p>

<p>Dump all <code>episode</code> objects to stdout.</p>
</li>
<li>
<p><code>--dump-complete-to</code></p>

<p>Dump a table of series and last downloaded information for all series in<br>
the database to stdout.  See --catch-up-series.</p>
</li>
<li>
<p><code>--dump-episodes name</code></p>

<p>Dump all episode objects matching series name <code>name</code> to stdout.</p>
</li>
<li>
<p><code>--dump-series name</code></p>

<p>Dump all series objects matching series name <code>name</code> to stdout.</p>
</li>
<li>
<p><code>--dump-stats</code></p>

<p>Dump information about the database to stdout.</p>
</li>
</ul><p>The following options augment the options above or have the stated side<br>
effects:</p>

<ul>
<li>
<p><code>--auto-backup {reset|program-update|schema-update|restore|force|never}</code></p>

<p>Perform a backup of the database under specific conditions given by the<br>
companion argument:</p>

<ul>
<li>
<code>compact</code> - when the database is being compacted</li>
<li>
<code>force</code> - always</li>
<li>
<code>never</code> - never</li>
<li>
<code>program-update</code> - when the program changed since the last db update</li>
<li>
<code>reset</code> - when the database is being reset</li>
<li>
<code>schema-update</code> - when the schema changes</li>
</ul>
<p>The default is to make backups for all conditions above.</p>
</li>
<li>
<p><code>--compact-database</code></p>

<p>This saves and restores the database, compacting it at the same time.</p>
</li>
<li>
<p><code>--config file</code></p>

<p>Load <code>file</code> as the configuration file instead of one of the built-in<br>
defaults.  The default list (searched in this order) is to load the first<br>
file found in the list:</p>

<ul>
<li>
<code>config.cl</code> in the same directory as the program</li>
<li><code>$HOME/.tget.cl</code></li>
<li>
<code>config.cl</code> in the tget data directory (see the --root option)</li>
</ul>
</li>
<li>
<p><code>--cron</code></p>

<p>Quiet mode, for cron jobs.</p>
</li>
<li>
<p><code>--db database</code></p>

<p>The name of the database.  The default is <code>db</code> in the tget data<br>
directory (see the --root).  This name will itself become a directory.</p>
</li>
<li>
<p><code>--debug</code></p>

<p>Run in debug mode.  This is recommended for developers only.</p>
</li>
<li>
<p><code>--feed-interval ndays</code></p>

<p>Set the feed interval to <code>ndays</code>.  Only useful when a user-defined<br>
function of one argument is given to a <code>defgroup</code>'s :rss-url option.<br>
See the example config file.</p>
</li>
<li>
<p><code>--learn</code></p>

<p>Don't download anything--useful in conjunction with reset to wipe the<br>
database and start over, or when starting to use tget for the first<br>
time.  See the examples below.</p>
</li>
<li>
<p><code>--reset</code></p>

<p>Reset database before beginning operation--this removes all data<br>
from the database.  The default --auto-backup settings will cause a<br>
backup to be performed before the reset.</p>
</li>
<li>
<p><code>--root data-directory</code></p>

<p>Change the data directory, the defaults is $HOME/.tget.d/</p>
</li>
</ul><p>Examples:</p>

<p>Toss current database and catch up on shows released in the last 180 days<br>
marking them all as `downloaded'</p>

<pre><code>$ tget --reset --learn --feed-interval 180
</code></pre>

<p>Same, but to a `temp' database in the current directory:</p>

<pre><code>$ tget --reset --learn --feed-interval 180 --root $PWD --db test.db
</code></pre>

<p>Usage from Cron:</p>

<pre><code>$ tget --cron
</code></pre>

<p>Let's see what the series object for "Regular Show" looks like.<br>
The series name is not case sensitive:</p>

<pre><code>$ tget --dump-series "regular show"
</code></pre>

<p>These all refer to the same series:</p>

<pre><code>$ tget --dump-series "james mays man lab"
$ tget --dump-series "James Mays Man Lab"
$ tget --dump-series "James May's Man Lab"
</code></pre>

<p>To see the episodes of the above, you would:</p>

<pre><code>$ tget --dump-episodes "James May's Man Lab"
</code></pre>

<p>Compact the database:</p>

<pre><code>$ tget --compact-database --dump-stats
</code></pre>

<p>Catch up series to a specific episode:</p>

<pre><code>#   note that episodes before s04e21 have been downloaded:
$ tget --catch-up-series "regular show s04e20"
#   note that all of season 4 has been downloaded:
$ tget --catch-up-series "breaking bad s04"
</code></pre>

<h2>Example configuration file</h2>

<pre><code>;; Config file for tget

(in-package :user)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; General options

#+ignore ;; Not really using this and it's a lot of data
(setq *log-rss* (merge-pathnames "rss.log" *tget-data-directory*))

;; A good resource to see why something is or isn't downloading
(setq *log-file* (merge-pathnames "ep.log" *tget-data-directory*))

(deftransmission ()
    :host (sys:getenv "TRANSMISSION_HOST")
    :port (sys:getenv "TRANSMISSION_PORT")
    :username (sys:getenv "TRANSMISSION_USER")
    :password (sys:getenv "TRANSMISSION_PASS")
    :add-paused nil
    :trash-torrent-file t
    :ratio "1.04")

(setq *download-root* "/me/layer/videos/")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; TVT

;; Not all sites support the idea of a delay, but TVT does.
;; It's a nice feature, because it allows you to delay "seeing" RSS items,
;; to give the various downloads time to settle.  It reduces the chances of
;; having to download repacks or propers (another name for repacks).
;;
;; I like a 6 hour delay.
(defvar *tvt-delay* 6)

;; Not all sites support the idea of a feed interval, but TVT does.
;; It's a nice feature, because if you decide to download a new series,
;; you'll get any episodes released in this period of time.  And, for the
;; initial installation, you can specify a really high interval (on the
;; command line, not here), to populate your database with your shows.
(setq *feed-interval* 14)

;; This function is given as the value of the defgroup :rss-url option.
;; The function is called, when tget needs to fetch the feed, with the
;; value *feed-interval* or the command line override for that variable
;; (the --interval argument).
(defun tvt-rss-feed (interval)
  (format nil "~a&amp;interval=~d+days"
      ;; This is the "Recent torrents" feed instead of the "Favorite
      ;; shows" feed I was using before.
      ;;
      ;; Using "Favorite shows" feed means you have to maintain your
      ;; list of shows in *two* places, which I find very annoying.
      ;;
      "http://www.tvtorrents.com/..."
      interval))

(defvar *tvt-rss* 'tvt-rss-feed)

;; When --debug is given on the command line, the debug version is used,
;; and that's what this is.  No need to bombard the RSS server with
;; requests while debugging.
(defvar *tvt-debug-feed* "tget-test-data/tvt-recent.xml")

;; This is how you define names for qualities you care about.
;;
(defquality :normal
    ;; The priority of a quality allows selection of episodes when more
    ;; than one quality is available at the same time, as is often the
    ;; case.  Higher numerical priority is given precedence.
    ;;
    ;; This is my preferred quality.

;;;; The documentation for these options is in the README.md file.
    :priority 50
    :source :hdtv
    :codec :x264 
    :resolution :sd)

(defquality :high
    :priority 40
    :source :hdtv
    :codec :x264 
    :resolution :720p)

(defquality :low
    :priority 30
    :source :hdtv
    :codec :xvid
    :resolution :sd)

;; This is a user-defined quality function.

(defun my-quality (episode)
  ;; Download :normal quality immediately.
  ;; If that's not available, then download :high quality after 12 hours
  ;; and :low quality after 2 days.  There are still some shows that never
  ;; get anything but :low, for some episodes.
  (if* (and (null
         ;; See if there is an episode with :normal quality.  The
         ;; :transient keyword is important, since it restricts the
         ;; search to episodes we have *not* downloaded yet.
         (query-episode :episode episode :quality :normal :transient t))
        (eq :high (episode-quality episode))
        (&gt;= (hours-available episode) 12))
     then ;; :normal quality is not available and the :high quality episode
      ;; has been available for 12 hours, then return...
      :high
   elseif (and (null
        ;; See if there is an episode with :normal or :high
        ;; quality.
        (or
         (query-episode :episode episode :quality :normal :transient t)
         (query-episode :episode episode :quality :high :transient t)))
           (eq :low (episode-quality episode))
           (&gt;= (hours-available episode) 48))
     then :low
     else :normal))

(defgroup :adrian
    :rss-url *tvt-rss*
    :debug-feed *tvt-debug-feed*
    :delay *tvt-delay*
    :quality 'my-quality
    :download-path (merge-pathnames "adrian/" *download-root*))

(defgroup :anh
    :rss-url *tvt-rss*
    :debug-feed *tvt-debug-feed*
    :delay *tvt-delay*
    :quality 'my-quality
    :download-path (merge-pathnames "anh/" *download-root*))

(defgroup :kevin
    :rss-url *tvt-rss*
    :debug-feed *tvt-debug-feed*
    :delay *tvt-delay*
    :quality 'my-quality
    :download-path (merge-pathnames "kevin/" *download-root*))

(defgroup :adrian+kevin
    :rss-url *tvt-rss*
    :debug-feed *tvt-debug-feed*
    :delay *tvt-delay*
    :quality 'my-quality
    :download-path (merge-pathnames "adrian+kevin/" *download-root*))

(defgroup :anh+kevin
    :rss-url *tvt-rss*
    :debug-feed *tvt-debug-feed*
    :delay *tvt-delay*
    :quality 'my-quality
    :download-path (merge-pathnames "anh+kevin/" *download-root*))

(defseries "8 Out of 10 Cats" :kevin)
(defseries "An Idiot Abroad" :adrian+kevin)
(defseries "Bates Motel" :anh+kevin)
(defseries "Boardwalk Empire" :kevin)
(defseries "Breaking Bad" :kevin :delay 0) ;; immediate download
(defseries "Childrens Hospital (US)" :kevin)
(defseries "Come Fly with Me (2010)" :kevin)
(defseries "Community" :adrian+kevin)
(defseries "Curb your Enthusiasm" :anh+kevin)
(defseries "Dexter" :kevin)
(defseries "Doc Martin" :anh+kevin)
(defseries "Downton Abbey" :anh)
(defseries "Dragons Den (UK)" :kevin)
(defseries "Eagleheart" :adrian+kevin)
(defseries "Elementary" :kevin)
(defseries "Falling Skies" :kevin)
(defseries "Frontline" :kevin)
(defseries "Futurama" :adrian+kevin)
(defseries "Game of Thrones" :kevin :delay 0) ;; immediate download
(defseries "Hannibal" :anh+kevin)
(defseries "Homeland" :kevin)
(defseries "James May's Man Lab" :adrian+kevin)
(defseries "Justified" :kevin)
(defseries "Kung Fu Panda: Legends of Awesomeness" :adrian)
(defseries "Longmire" :kevin)
(defseries "Louis Theroux Documentaries" :kevin)
(defseries "Louie" :kevin)
(defseries "Luther" :kevin)
(defseries "Mad Men" :kevin)
(defseries "Midsomer Murders" :anh)
(defseries "Misfits" :kevin)
(defseries "Modern Family" :adrian+kevin)
(defseries "Motive" :kevin)
(defseries "Mythbusters" :adrian+kevin)
(defseries "NCIS" :adrian+kevin)
(defseries "Nathan for You" :adrian+kevin)
(defseries "Nova" :adrian+kevin)
(defseries "Oliver Stone's Untold History of the United States" :adrian+kevin)
(defseries "Orphan Black" :kevin)
(defseries "Parks and Recreation" :adrian+kevin)
(defseries "Person of Interest" :kevin)
(defseries "Phineas and Furb" :adrian)
(defseries "Ridiculousness" :adrian+kevin)
(defseries "Shameless (US)" :kevin)
(defseries "Shark Tank" :adrian+kevin)
(defseries "Sherlock" :kevin)
(defseries "Southland" :kevin)
(defseries "Strike Back" :kevin)
(defseries "The Americans (2013)" :kevin)
(defseries "The Colbert Report" :kevin)
(defseries "The Daily Show with Jon Stewart" :kevin)
(defseries "The Following" :anh+kevin)
(defseries "The Good Wife" :anh+kevin)
(defseries "The Graham Norton Show" :kevin)
(defseries "The IT Crowd" :kevin)
(defseries "The Jeselnik Offensive" :kevin)
(defseries "The Killing" :anh+kevin)
(defseries "The Mentalist" :adrian+kevin)
(defseries "The Neighbors (2012)" :adrian+kevin)
(defseries "The Newsroom (2012)" :kevin)
(defseries "The Simpsons" :adrian+kevin)
(defseries "The Ultimate Fighter" :kevin)
(defseries "The Walking Dead" :kevin :delay 0) ;; immediate download
(defseries "Top Gear (US)" :adrian+kevin :quality :high)
(defseries "Top Gear" :adrian+kevin :quality :high)
(defseries "Top of the Lake" :anh+kevin)
(defseries "Tosh.0" :kevin)
(defseries "Vikings" :kevin)
(defseries "Wallander" :anh+kevin)
(defseries "White Collar" :anh+kevin)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; BTN

;; BTN quality is kinda funky and inconsistent.  Define some different
;; qualities for shows from them.

(defquality :high-any-source
    :priority 40
    :codec :x264 
    :resolution :720p)

(defquality :x264-?dtv-mp4
    :priority 10
    :container :mp4
    :source '(:pdtv :hdtv)
    :codec :x264)

(defvar *btn-my-series-feed*
    "https://broadcasthe.net/...")

(defvar *btn-debug-feed* "tget-test-data/btn.xml")

(defgroup :btn-adrian+kevin
    :rss-url *btn-my-series-feed*
    :debug-feed *btn-debug-feed*
    :ratio "-1" 
    :quality :normal
    :download-path (merge-pathnames "adrian+kevin/" *download-root*))

(defgroup :btn-kevin
    :rss-url *btn-my-series-feed*
    :debug-feed *btn-debug-feed*
    :ratio "-1" 
    :quality :normal
    :download-path (merge-pathnames "kevin/" *download-root*))

(defseries "Regular Show" :btn-adrian+kevin :quality :high-any-source)
(defseries "Spongebob Squarepants" :btn-adrian+kevin :quality :high-any-source)
(defseries "World's Craziest Fools" :btn-adrian+kevin :quality :x264-?dtv-mp4)
(defseries "Witness (2012)" :btn-kevin :quality :x264-?dtv-mp4)
</code></pre>
</div>
</body>
</html>
